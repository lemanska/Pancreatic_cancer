paca_rate <- ggplot(data = measure_paca,
aes(date, value)) +
geom_line()+
geom_point()+
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+#%B
xlab("Time")+
ylab("Pa Ca diagn (rate)")+
labs(colour = "Station")+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggsave(
plot= paca_rate, dpi=800,width = 20,height = 10, units = "cm",
filename="paca_rate.png", path=here::here("output"),
)
fs::dir_create(here::here("output", "measures"))
library(tidyverse)
library(here)
library(ggplot2)
library(dplyr)
fs::dir_create(here::here("output", "measures"))
#test figure of age
df_input <- read.delim(here("output", "input_main.csv"), header=TRUE, sep=",")
plot_age <- ggplot(data=df_input, aes(age)) + geom_histogram()
ggsave(plot= plot_age,
filename="age_plot1.png", path=here::here("output"))
#fig of paca diagnosis over time
df_input$ca_date <- as.Date(df_input$ca_date,format = "%Y-%m-%d")
df_input$Month <- as.Date(cut(df_input$ca_date, breaks = "month"))
paca_time <- ggplot(data = df_input,
aes(Month, pa_ca)) +
stat_summary(fun = sum, geom = "line") + # or "bar"
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+# or %B
xlab("Time")+
ylab("Pa Ca diagn (count)")+
labs(colour = "Station")+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggsave(
plot= paca_time, dpi=800,width = 20,height = 10, units = "cm",
filename="paca_no.png", path=here::here("output"))
#####generate a table of counts per month
paca_counts_pm <- table(df_input$Month)
write.table(paca_counts_pm, here::here("output", "paca_counts_pm.csv"),
col.names= c("date","count"),sep = ",",row.names = F)
##########################################################################
### this does not work ####
##########################################################################
measure_paca <- read.delim(here::here("output", "measures",
"measure_pa_ca_diagnosis.csv"),
header=TRUE, sep=",")
#measure_paca <- read_csv(here::here("output","measures",
#                                    "measure_pa_ca_diagnosis.csv"))
#measure_paca$date <- as.Date(measure_paca$date,format = "%d/%m/%Y")
#measure_paca <- read.csv(here::here("output","measures",
#                                    "measure_pa_ca_diagnosis.csv"),
#                        header=TRUE, sep=",")
measure_paca$date <- as.Date(measure_paca$date,format = "%Y-%m-%d")
#measure_paca <- measure_paca %>% distinct(date, .keep_all = TRUE)
paca_rate <- ggplot(data = measure_paca,
aes(date, value)) +
geom_line()+
geom_point()+
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+#%B
xlab("Time")+
ylab("Pa Ca diagn (rate)")+
labs(colour = "Station")+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggsave(
plot= paca_rate, dpi=800,width = 20,height = 10, units = "cm",
filename="paca_rate.png", path=here::here("output"),
)
fs::dir_create(here::here("output", "measures"))
#test figure of age
df_input <- read.delim(here("output", "input_main.csv"), header=TRUE, sep=",")
plot_age <- ggplot(data=df_input, aes(age)) + geom_histogram()
ggsave(plot= plot_age,
filename="age_plot1.png", path=here::here("output"))
#fig of paca diagnosis over time
df_input$ca_date <- as.Date(df_input$ca_date,format = "%Y-%m-%d")
df_input$Month <- as.Date(cut(df_input$ca_date, breaks = "month"))
paca_time <- ggplot(data = df_input,
aes(Month, pa_ca)) +
stat_summary(fun = sum, geom = "line") + # or "bar"
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+# or %B
xlab("Time")+
ylab("Pa Ca diagn (count)")+
labs(colour = "Station")+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggsave(
plot= paca_time, dpi=800,width = 20,height = 10, units = "cm",
filename="paca_no.png", path=here::here("output"))
ggsave(plot= plot_age,
filename="age_plot1.png", path=here::here("output"))
ggsave(plot= plot_age,dpi=600,width = 10,height = 10, units = "cm",
filename="age_plot1.png", path=here::here("output"))
plot_age <- ggplot(data=df_input, aes(age)) + geom_histogram(bins=30)
ggsave(plot= plot_age,dpi=600,width = 10,height = 10, units = "cm",
filename="age_plot1.png", path=here::here("output"))
fs::dir_create(here::here("output", "measures"))
#test figure of age
df_input <- read.delim(here("output", "input_main.csv"), header=TRUE, sep=",")
plot_age <- ggplot(data=df_input, aes(age)) + geom_histogram(bins=30)
ggsave(plot= plot_age,dpi=600,width = 10,height = 10, units = "cm",
filename="age_plot1.png", path=here::here("output"))
#fig of paca diagnosis over time
df_input$ca_date <- as.Date(df_input$ca_date,format = "%Y-%m-%d")
df_input$Month <- as.Date(cut(df_input$ca_date, breaks = "month"))
paca_time <- ggplot(data = df_input,
aes(Month, pa_ca)) +
stat_summary(fun = sum, geom = "line") + # or "bar"
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+# or %B
xlab("Time")+
ylab("Pa Ca diagn (count)")+
labs(colour = "Station")+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggsave(
plot= paca_time, dpi=800,width = 20,height = 10, units = "cm",
filename="paca_no.png", path=here::here("output"))
#####generate a table of counts per month
paca_counts_pm <- table(df_input$Month)
write.table(paca_counts_pm, here::here("output", "paca_counts_pm.csv"),
col.names= c("date","count"),sep = ",",row.names = F)
measure_paca <- read.delim(here::here("output", "measures",
"measure_pa_ca_diagnosis.csv"),
header=TRUE, sep=",")
measure_paca$date <- as.Date(measure_paca$date,format = "%Y-%m-%d")
paca_rate <- ggplot(data = measure_paca,
aes(date, value)) +
geom_line()+
geom_point()+
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+#%B
xlab("Time")+
ylab("Pa Ca diagn (rate)")+
labs(colour = "Station")+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggsave(
plot= paca_rate, dpi=800,width = 20,height = 10, units = "cm",
filename="paca_rate.png", path=here::here("output"),
)
read_feather(file, col_select = NULL, as_data_frame = TRUE)
read_feather("C:\Users\al0025\Documents\GitHub\Pancreatic_cancer\output\input_ethnicity.feather", col_select = NULL, as_data_frame = TRUE)
read_feather("Pancreatic_cancer\output\input_ethnicity.feather", col_select = NULL, as_data_frame = TRUE)
read_feather("Pancreatic_cancer/output/input_ethnicity.feather", col_select = NULL, as_data_frame = TRUE)
read.feather("Pancreatic_cancer/output/input_ethnicity.feather", col_select = NULL, as_data_frame = TRUE)
library(tidyverse)
remove.packages("dplyr")
library(tidyverse)
library(tidyverse)
install.packages("dplyr")
library(dplyr)
library(tidyverse)
remove.packages("tidyr")
install.packages("tidyr")
library(tidyverse)
install.packages("tidyr")
library(tidyr)
library(tidyverse)
read.feather("Pancreatic_cancer/output/input_ethnicity.feather", col_select = NULL, as_data_frame = TRUE)
read_feather("Pancreatic_cancer/output/input_ethnicity.feather", col_select = NULL, as_data_frame = TRUE)
measure_paca <- read_csv(here::here("output","measures",
"measure_pa_ca_diagnosis.csv"))
install.packages("feather")
library(feather)
read_feather("Pancreatic_cancer/output/input_ethnicity.feather", col_select = NULL, as_data_frame = TRUE)
df <- read_feather("Pancreatic_cancer/output/input_ethnicity.feather")
df <- read_feather("output\input_ethnicity.feather")
df <- read_feather("output/input_ethnicity.feather")
df <- read_feather(here::here("output","input_ethnicity.feather"))
df <- read_feather(here::here("output","input_ethnicity.feather"))
df <- read_feather(here::here("output","measures",
"input_2015-01-01.feather"))
df <- read_feather(here("output","measures",
"input_2015-01-01.feather"))
df <- read_feather(here::here(input_2015-01-01.feather))
df <- read_feather(here::here(input.feather))
"input_2015-01-01.feather"))
df <- read_feather(here::here(input.feather))
df <- read_feather(input.feather)
df <- read_feather("input.feather")
measure_paca <- read_csv(here::here("output","measures",
"measure_pa_ca_diagnosis_rate.csv"))
View(measure_paca)
View(measure_paca)
measure_paca <- read_csv(here::here("output","measures",
"measure_pa_ca_diagnosis_rate.csv"))
measure_paca <- read_csv(here::here("output","measures",
"measure_pa_ca_diagnosis_rate.csv"))
View(measure_paca)
measure_paca$date <- as.Date(measure_paca$date,format = "%Y-%m-%d")
paca_rate <- ggplot(data = measure_paca,
aes(date, value)) +
geom_line()+
geom_point()+
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+#%B
xlab("Time")+
ylab("Pa Ca diagn (rate)")+
labs(colour = "Station")+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggsave(
plot= paca_rate, dpi=800,width = 20,height = 10, units = "cm",
filename="paca_rate.png", path=here::here("output"),
)
View(paca_rate)
View(measure_paca)
########
#pancreatic cancer rates
########
measure_paca_region <- read_csv(here::here("output","measures",
"measure_pa_ca_by_region_rate.csv"))
measure_paca_region$date <- as.Date(measure_paca$date,format = "%Y-%m-%d")
View(measure_paca_region)
688/7
688/8
measure_paca_region <- read_csv(here::here("output","measures",
"measure_pa_ca_by_region_rate.csv"))
unique(measure_paca_region$region)
measure_paca <- read_csv(here::here("output","measures",
"measure_pa_ca_diagnosis_rate.csv"))
measure_paca$date <- as.Date(measure_paca$date,format = "%Y-%m-%d")
paca_rate <- ggplot(data = measure_paca,
aes(date, value)) +
geom_line()+
geom_point()+
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+#%B
xlab("Time")+
ylab("Pa Ca diagn (rate)")+
labs(colour = "Station")+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggsave(
plot= paca_rate, dpi=800,width = 20,height = 10, units = "cm",
filename="paca_rate.png", path=here::here("output"),
)
write.table(measure_paca, here::here("output", "paca_rate.csv"),
col.names= c("count", "population", "rate", "date"),sep = ",",row.names = F)
measure_paca_region <- read_csv(here::here("output","measures",
"measure_pa_ca_by_region_rate.csv"))
measure_paca_region$date <- as.Date(measure_paca_region$date,format = "%Y-%m-%d")
cl_id <- unique(measure_paca_region$region)
paca_rate_region <- ggplot(data = measure_paca_region,
aes(date, value)) +
geom_line(aes(color = cl_id))+
geom_point(aes(color = cl_id))+
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+#%B
xlab("Time")+
ylab("Pa Ca diagnosis by region (rate)")+
labs(color = cl_id)+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
View(measure_paca_region)
ggsave(
plot= paca_rate_region, dpi=800,width = 20,height = 10, units = "cm",
filename="paca_rate_region.png", path=here::here("output"),
)
View(measure_paca)
measure_paca_region <- read_csv(here::here("output","measures",
"measure_pa_ca_by_region_rate.csv"))
library(tidyverse)
library(here)
library(ggplot2)
library(dplyr)
measure_paca_region <- read_csv(here::here("output","measures",
"measure_pa_ca_by_region_rate.csv"))
measure_paca_region$date <- as.Date(measure_paca_region$date,format = "%Y-%m-%d")
cl_id <- unique(measure_paca_region$region)
paca_rate_region <- ggplot(data = measure_paca_region,
aes(date, value)) +
geom_line(aes(color = cl_id))+
geom_point(aes(color = cl_id))+
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+#%B
xlab("Time")+
ylab("Pa Ca diagnosis by region (rate)")+
labs(colour = cl_id)+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggsave(
plot= paca_rate_region, dpi=800,width = 20,height = 10, units = "cm",
filename="paca_rate_region.png", path=here::here("output"),
)
paca_rate_region <- ggplot(data = measure_paca_region,
aes(date, value)) +
geom_line(data = measure_paca_region,
aes(date, value, color = cl_id))+
geom_point(data = measure_paca_region,
aes(date, value, color = cl_id))+
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+#%B
xlab("Time")+
ylab("Pa Ca diagnosis by region (rate)")+
labs(colour = cl_id)+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggsave(
plot= paca_rate_region, dpi=800,width = 20,height = 10, units = "cm",
filename="paca_rate_region.png", path=here::here("output"),
)
ggplot(data = measure_paca_region,
aes(date, value)) +
geom_line(aes(color = cl_id))+
geom_point(aes(color = cl_id))+
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+#%B
xlab("Time")+
ylab("Pa Ca diagnosis by region (rate)")+
labs(colour = cl_id)+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
cl_id
View(measure_paca_region)
measure_paca_region <- read_csv(here::here("output","measures",
"measure_pa_ca_by_region_rate.csv"))
measure_paca_region$date <- as.Date(measure_paca_region$date,format = "%Y-%m-%d")
cl_id <- unique(measure_paca_region$region)
paca_rate_region <- ggplot(data = measure_paca_region,
aes(date, value)) +
geom_line(aes(color = region))+
geom_point(aes(color = region))+
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+#%B
xlab("Time")+
ylab("Pa Ca diagnosis by region (rate)")+
labs(colour = region)+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggplot(data = measure_paca_region,
aes(date, value)) +
geom_line(aes(color = region))+
geom_point(aes(color = region))+
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+#%B
xlab("Time")+
ylab("Pa Ca diagnosis by region (rate)")+
#labs(colour = region)+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
paca_rate_region <- ggplot(data = measure_paca_region,
aes(date, value)) +
geom_line(aes(color = region))+
geom_point(aes(color = region))+
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+#%B
xlab("Time")+
ylab("Pa Ca diagnosis by region (rate)")+
#labs(colour = region)+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggsave(
plot= paca_rate_region, dpi=800,width = 20,height = 10, units = "cm",
filename="paca_rate_region.png", path=here::here("output"),
)
write.table(measure_paca_region, here::here("output", "paca_rate_region.csv"),
col.names= c("region","count", "population", "rate", "date"),sep = ",",row.names = F)
library(tidyverse)
library(here)
library(ggplot2)
library(dplyr)
########
#pancreatic cancer rates
########
measure_paca <- read_csv(here::here("output","measures",
"measure_pa_ca_diagnosis_rate.csv"))
measure_paca$date <- as.Date(measure_paca$date,format = "%Y-%m-%d")
paca_rate <- ggplot(data = measure_paca,
aes(date, value)) +
geom_line()+
geom_point()+
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+#%B
xlab("Time")+
ylab("Pa Ca diagn (rate)")+
labs(colour = "Station")+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggsave(
plot= paca_rate, dpi=800,width = 20,height = 10, units = "cm",
filename="paca_rate.png", path=here::here("output"),
)
write.table(measure_paca, here::here("output", "paca_rate.csv"),
col.names= c("count", "population", "rate", "date"),sep = ",",row.names = F)
########
#pancreatic cancer rates ***by region***
########
measure_paca_region <- read_csv(here::here("output","measures",
"measure_pa_ca_by_region_rate.csv"))
measure_paca_region$date <- as.Date(measure_paca_region$date,format = "%Y-%m-%d")
cl_id <- unique(measure_paca_region$region)
paca_rate_region <- ggplot(data = measure_paca_region,
aes(date, value)) +
geom_line(aes(color = region))+
geom_point(aes(color = region))+
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+#%B
xlab("Time")+
ylab("Pa Ca diagnosis by region (rate)")+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggsave(
plot= paca_rate_region, dpi=800,width = 20,height = 10, units = "cm",
filename="paca_rate_region.png", path=here::here("output"),
)
write.table(measure_paca_region, here::here("output", "paca_rate_region.csv"),
col.names= c("region","count", "population", "rate", "date"),sep = ",",row.names = F)
View(paca_rate_region)
View(paca_rate)
View(paca_rate_region)
View(measure_paca)
View(measure_paca_region)
measure_paca_IMD <- read_csv(here::here("output","measures",
"measure_pa_ca_by_IMD_rate.csv"))
View(measure_paca_IMD)
measure_paca_IMD <- read_csv(here::here("output","measures",
"measure_pa_ca_by_IMD_rate.csv"))
measure_paca_IMD$date <- as.Date(measure_paca_IMD$date,format = "%Y-%m-%d")
paca_rate_IMD <- ggplot(data = measure_paca_IMD,
aes(date, value)) +
geom_line(aes(color = IMD))+
geom_point(aes(color = IMD))+
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+#%B
xlab("Time")+
ylab("Pa Ca diagnosis by IMD (rate)")+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggsave(
plot= paca_rate_IMD, dpi=800,width = 20,height = 10, units = "cm",
filename="paca_rate_IMD.png", path=here::here("output"),
)
measure_paca_IMD <- read_csv(here::here("output","measures",
"measure_pa_ca_by_IMD_rate.csv"))
measure_paca_IMD$date <- as.Date(measure_paca_IMD$date,format = "%Y-%m-%d")
paca_rate_IMD <- ggplot(data = measure_paca_IMD,
aes(date, value)) +
geom_line(aes(color = IMD))+
geom_point(aes(color = IMD))+
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+#%B
xlab("Time")+
ylab("Pa Ca diagnosis by IMD (rate)")+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggsave(
plot= paca_rate_IMD, dpi=800,width = 20,height = 10, units = "cm",
filename="paca_rate_IMD.png", path=here::here("output"),
)
measure_paca_IMD <- read_csv(here::here("output","measures",
"measure_pa_ca_by_IMD_rate.csv"))
measure_paca_IMD$date <- as.Date(measure_paca_IMD$date,format = "%Y-%m-%d")
paca_rate_IMD <- ggplot(data = measure_paca_IMD,
aes(date, value)) +
geom_line(aes(color = imd_cat))+
geom_point(aes(color = imd_cat))+
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+#%B
xlab("Time")+
ylab("Pa Ca diagnosis by IMD (rate)")+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggsave(
plot= paca_rate_IMD, dpi=800,width = 20,height = 10, units = "cm",
filename="paca_rate_IMD.png", path=here::here("output"),
)
write.table(measure_paca_IMD, here::here("output", "paca_rate_IMD.csv"),
col.names= c("imd_cat","count", "population", "rate", "date"),sep = ",",row.names = F)
class(measure_paca_IMD$imd_cat)
measure_paca_IMD <- read_csv(here::here("output","measures",
"measure_pa_ca_by_IMD_rate.csv"))
measure_paca_IMD$date <- as.Date(measure_paca_IMD$date,format = "%Y-%m-%d")
library(tidyverse)
library(here)
library(ggplot2)
library(dplyr)
measure_paca_IMD <- read_csv(here::here("output","measures",
"measure_pa_ca_by_IMD_rate.csv"))
measure_paca_IMD$date <- as.Date(measure_paca_IMD$date,format = "%Y-%m-%d")
class(measure_paca_IMD$imd_cat)
as.character(measure_paca_IMD$imd_cat)
measure_paca_IMD <- read_csv(here::here("output","measures",
"measure_pa_ca_by_IMD_rate.csv"))
measure_paca_IMD$date <- as.Date(measure_paca_IMD$date,format = "%Y-%m-%d")
measure_paca_IMD$imd_cat <- as.character(measure_paca_IMD$imd_cat)
paca_rate_IMD <- ggplot(data = measure_paca_IMD,
aes(date, value)) +
geom_line(aes(color = imd_cat))+
geom_point(aes(color = imd_cat))+
scale_x_date(date_breaks = "2 month",
date_labels = "%Y-%m")+#%B
xlab("Time")+
ylab("Pa Ca diagnosis by IMD (rate)")+
theme_bw()+
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggsave(
plot= paca_rate_IMD, dpi=800,width = 20,height = 10, units = "cm",
filename="paca_rate_IMD.png", path=here::here("output"),
)
write.table(measure_paca_IMD, here::here("output", "paca_rate_IMD.csv"),
col.names= c("imd_cat","count", "population", "rate", "date"),sep = ",",row.names = F)
as.character(measure_paca_IMD$imd_cat)
